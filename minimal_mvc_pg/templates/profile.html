<!-- File: templates/profile.html -->
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Your Dashboard</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  </head>
  <body>
    <div class="container">
      <h1>Welcome, {{ username }}!</h1>
      <div class="profile-stats">
        <div>
          <h3>Major</h3>
          <p>{{ major }}</p>
        </div>
        <div>
          <h3>Beers</h3>
          <p>{{ beer_count }}</p>
        </div>
        <div>
          <h3>Spent</h3>
          <p>${{ "%.2f"|format(money_spent) }}</p>
        </div>
      </div>

      {% with messages = get_flashed_messages(with_categories=true) %}
        {% for category, msg in messages %}
          <div class="flash {{ category }}">{{ msg }}</div>
        {% endfor %}
      {% endwith %}

      <form action="{{ url_for('drink') }}" method="post">
        <button type="submit">Have another beer 🍺</button>
      </form>

      <form action="{{ url_for('deleteUser') }}" method="post">
        <button type="submit">Delete user 💀💀</button>
      </form>

      <div class="leaderboard">
        <h2>Top Beer Drinkers Leaderboard</h2>
        <ol>
          {% for user in leaderboard %}
            <li>{{ user.username }}, {{user.major}} — {{ user.beer_count }} beers</li>
          {% endfor %}
        </ol>
      </div>

      <p style="text-align:center;"><a href="{{ url_for('logout') }}">Log out</a></p>
    </div>
  </body>
</html>